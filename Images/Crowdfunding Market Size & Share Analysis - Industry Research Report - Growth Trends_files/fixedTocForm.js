let fixed_form_error=false;var base_url=window.location.href.indexOf("mordorintelligence")!=-1?"https://express.mordorintelligence.com":window.location.href.indexOf("mordorlabs")!=-1?"https://express.mordorlabs.com":"http://localhost:8080"
$('.fixedForm-email').on('input',function(event){let helperText='';if(event.target.value&&!email_regex.test(event.target.value)){document.querySelector('#fixedForm-emailerror').classList.add('show-customize-error');helperText="Please enter a valid email";document.querySelector('#fixedForm-emailerror').innerText=helperText;fixed_form_error=true;}else if(event.target.value.length){let genericEmail=verifyGenericEmail(event.target.value);if(["generic"].indexOf(genericEmail)>-1){document.querySelector('#fixedForm-emailerror').classList.add('show-customize-error');helperText="Please enter your business email";document.querySelector('#fixedForm-emailerror').innerText=helperText;fixed_form_error=false;}
else{fixed_form_error=false;document.querySelector('#fixedForm-emailerror').classList.remove('show-customize-error');}}
else if(!event.target.value&&!event.target.value.trim().length){document.querySelector('#fixedForm-emailerror').classList.add('show-customize-error');helperText="Please enter a valid email";document.querySelector('#fixedForm-emailerror').innerText=helperText;fixed_form_error=true;}});$('.fixedForm-requirement').on('input',function(e){if(!e.target.value){document.querySelector('#fixedForm-textarea_error').classList.add('show-customize-error');fixed_form_error=true;}else{fixed_form_error=false;document.querySelector('#fixedForm-textarea_error').classList.remove('show-customize-error');}});$('.rdFixed-custmzeForm').on('click',function(e){e.preventDefault();let customizeEMailError=$('.fixedForm-email').val();if(customizeEMailError==""||!email_regex.test(customizeEMailError)){document.querySelector('#fixedForm-emailerror').classList.add('show-customize-error');fixed_form_error=true;}else{fixed_form_error=false;document.querySelector('#fixedForm-emailerror').classList.remove('show-customize-error');}
if($('.fixedForm-requirement').val()==""){document.querySelector('#fixedForm-textarea_error').classList.add('show-customize-error');;fixed_form_error=true;}
else{fixed_form_error=false;document.querySelector('#fixedForm-textarea_error').classList.remove('show-customize-error');;}
if(customizeEMailError!=""&&$('.fixedForm-requirement').val()!=""&&!fixed_form_error&&email_regex.test(customizeEMailError)){document.querySelector('#fixedform-loader').style.display='block';document.querySelector('#fixedform-loader').style.opacity=1;const body=JSON.stringify({"email":$('.fixedForm-email').val().trim(),"is_blog_lead":JSON.parse(localStorage.getItem('visited_blog'))||false,"desc":$('.fixedForm-requirement').val().trim(),"cta":"customization","rep_id":report_data.id,"model_report_id":report_data.id,"model_report_name":report_data.title,"rep_title":report_data.title,"model_cat_id":report_data.category_id,"model_sub_cat_id":report_data.sub_category_id,"model_cat_name":report_data.category_name,"model_sub_cat_name":report_data.sub_category_name,"url":window.location.href,"source_url":window.location.href,"customsource_url":window.location.href,"custom_user_session_id":new Date().getTime(),"cta_text":""})
fetch(`${base_url}/api/leads`,{method:'post',body}).then(res=>{if(res.ok&&res.status===200){return res.json();}else{throw new Error('Something went wrong');}}).then(function(res){$('#successModal').modal('show');document.querySelector('#fixedform-loader').style.display='none';document.querySelector('.fixed-customize-form').classList.remove('show-fixed-form');document.querySelector('.close-fixed-customize-form').classList.remove('show-close-button');$('.fixedForm-email').val('');$('.fixedForm-requirement').val('');document.querySelector('.success_content').innerText="You will receive the requested sample via email.";let event_type="form-submit";let event_props={"form_type":amplitude_events.form_type,"event_category":amplitude_events.event_category,"email":$('.fixedForm-email').val().trim(),"is_blog_lead":JSON.parse(localStorage.getItem('visited_blog'))||false,"cat_id":report_data.category_id,"sub_cat_id":report_data.sub_category_id,"category":report_data.category_name,"related_tags":report_data.related_tags.length?report_data.related_tags:null,"meta":{"hub_id":report_data.hub_id,"lead_id":res.lead_id},"cta_text":"Customize The Report","source":window.location.href.includes("gclid")||window.location.href.includes("fbclid")?"Paid":"Organic","landing_page":window.location.href}
amplitude.getInstance().setUserProperties({email:$('.fixedForm-email').val().trim(),lead_id:res.lead_id,application:"website"});amplitude.getInstance().logEvent(event_type,event_props);let wisepop=document.getElementById('wisepops-root');if(wisepop){wisepop.style.display='none';}}).catch(error=>{$('#failureModal').modal('show');document.querySelector('.fixed-customize-form').classList.remove('show-fixed-form');document.querySelector('.close-fixed-customize-form').classList.remove('show-close-button');$('.fixedForm-email').val('');$('.fixedForm-requirement').val('');document.querySelector('#fixedform-loader').style.display='none';document.querySelector('.failure_content').innerText="Something went wrong. Please try again later or refresh."})}})
if(!report_data.hasOwnProperty('report_mode')||report_data.report_mode==="old"){let customize_error=false;$('#oldcustomize_email').on('input',function(e){let helperText='';if(e.target.value&&!email_regex.test(e.target.value)){document.querySelector('.old-customize-lead-err').style.display="block";helperText="Please enter a valid email";document.querySelector('.old-customize-lead-err').innerText=helperText;customize_error=true;}else if(e.target.value.length){let genericEmail=verifyGenericEmail(event.target.value);if(["generic"].indexOf(genericEmail)>-1){document.querySelector('.old-customize-lead-err').classList.add('show-customize-error');helperText="Please enter your business email";document.querySelector('.old-customize-lead-err').innerText=helperText;customize_error=false;}
else{customize_error=false;document.querySelector('.old-customize-lead-err').classList.remove('show-customize-error');document.querySelector('.old-customize-lead-err').style.display="none";}}
else if(!e.target.value&&!e.target.value.trim().length){document.querySelector('.old-customize-lead-err').style.display="block";helperText="Please enter a valid email";document.querySelector('.old-customize-lead-err').innerText=helperText;customize_error=true;}});$('#oldcustomize_adress').on('input',function(e){if(!e.target.value){document.querySelector('.customize_adress_error').style.display="block";customize_error=true;}else{customize_error=false;document.querySelector('.customize_adress_error').style.display="none";}})
$('#oldcustmzeSubmtBtn').on('click',function(e){e.preventDefault();let customizeEMailError=$('#oldcustomize_email').val();if(customizeEMailError==""||!email_regex.test(customizeEMailError)){document.querySelector('.old-customize-lead-err').style.display="block";customize_error=true}else{customize_error=false
document.querySelector('.old-customize-lead-err').style.display="none";}
if($('#oldcustomize_adress').val()==""){document.querySelector('.customize_adress_error').style.display="block";customize_error=true}
else{customize_error=false
document.querySelector('.customize_adress_error').style.display="none";}
if(customizeEMailError!=""&&email_regex.test(customizeEMailError)&&!customize_error){document.querySelector('#customize-loader').style.display="block";fetch(`${base_url}/api/leads`,{method:'post',body:JSON.stringify({"email":$('#oldcustomize_email').val().trim(),"is_blog_lead":document.referrer.indexOf('blog')!==-1?true:false,"desc":$('#oldcustomize_adress').val().trim(),"cta":"customization","rep_id":report_data.id,"model_report_id":report_data.id,"model_report_name":report_data.title,"rep_title":report_data.title,"model_cat_id":report_data.category_id,"model_sub_cat_id":report_data.sub_category_id,"model_cat_name":report_data.category_name,"model_sub_cat_name":report_data.sub_category_name,"url":window.location.href,"source_url":window.location.href,"customsource_url":window.location.href,"custom_user_session_id":new Date().getTime(),"cta_text":""})}).then(res=>{if(res.ok&&res.status===200){return res.json();}else{throw new Error('Something went wrong');}}).then(res=>{document.querySelector('#customize-loader').style.display='none';$('#successModal').modal('show');document.querySelector('.success_content').innerText="You will receive the requested sample via email.";$('#oldcustomize_email').val("");$('#oldcustomize_adress').val("");let event_type="form-submit";let event_props={"event_category":amplitude_events.event_category,"form_type":amplitude_events.form_type,"email":$('#oldcustomize_email').val().trim(),"is_blog_lead":JSON.parse(localStorage.getItem('visited_blog'))||false,"cat_id":report_data.category_id,"sub_cat_id":report_data.sub_category_id,"category":report_data.category_name,"related_tags":report_data.related_tags.length?report_data.related_tags:null,"meta":{"hub_id":report_data.hub_id,"lead_id":res.lead_id},"cta_text":"Customize The Report","source":window.location.href.includes("gclid")||window.location.href.includes("fbclid")?"Paid":"Organic","landing_page":window.location.href}
amplitude.getInstance().setUserProperties({email:$('#oldcustomize_email').val().trim(),lead_id:res.lead_id,application:"website"});amplitude.getInstance().logEvent(event_type,event_props);let wisepop=document.getElementById('wisepops-root');if(wisepop){wisepop.style.display='none';}}).catch((error)=>{document.querySelector('#customize-loader').style.display='none';$('#failureModal').modal('show');document.querySelector('.failure_content').innerText="Something went wrong. Please try again later or refresh."})}});}
function verifyGenericEmail(email){var domain_full=(email.split('@'))[1];var domain_name=(domain_full.split('.'))[0];var domain_surname=(domain_full.split('.'))[domain_full.split('.').length-1];var domain_arr=["gmail","yahoo","hotmail","aol","msn","wanadoo","orange","comcast","live","rediffmail","free","gmx","web","yandex","ymail","libero","outlook","mail","googlemail","rocketmail","freenet","mac","icloud"];var list_of_generic_emails=domain_arr;if(list_of_generic_emails.indexOf(domain_name)!==-1||email.indexOf("naver")!==-1){return 'generic';}else if(domain_surname==='edu'||domain_full.indexOf(".ac.")!==-1||email.indexOf("student")!==-1){return 'educational';}else
return 'valid';}